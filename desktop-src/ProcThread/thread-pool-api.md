---
Description: The thread pool application programming interface (API) uses an object-based design.
ms.assetid: c8656469-a273-4838-aa1a-86140b0cd0a2
title: Thread Pool API
ms.date: 05/31/2018
ms.topic: article
ms.author: windowssdkdev
ms.prod: windows
ms.technology: desktop
---

# Thread Pool API

The thread pool application programming interface (API) uses an object-based design. Each of the following objects is represented by a user-mode data structure:

-   A pool object is a set of worker threads that can be used to perform work. Each process can create multiple isolated pools with different characteristics as necessary. There is also a default pool for each process.
-   A clean-up group is associated with a set of callback-generating objects. Functions exists to wait on and release all objects that are members of each clean-up group. This frees the application from keeping track of all the objects it has created.
-   A work object is assigned to a pool and optionally to a clean-up group. It can be posted, causing a worker thread from the pool to execute its callback. A work object can have multiple posts outstanding; each generates a callback. The post operation cannot fail due to lack of resources.
-   A timer object controls the scheduling of callbacks. Each time a timer expires, its callback is posted to its worker pool. Setting a timer cannot fail due to lack of resources.
-   A wait object causes a waiter thread to wait on a waitable handle. After the wait is satisfied or the time-out period expires, the waiter thread posts the wait objects' callback to the wait's worker pool. Setting a wait cannot fail due to lack of resources.
-   An I/O object associates a file handle with the I/O completion port for the thread pool. When an asynchronous I/O operation completes, a worker thread picks up the status of the operation and calls the I/O object's callback.

The following table describes the features of the original and current thread pool APIs.



| Feature              | Original API                                                                                                                                                                                                                                                                                                                   | Current API                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
|----------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Synch                | [**RegisterWaitForSingleObject**](base.registerwaitforsingleobject)<br/> [**UnregisterWaitEx**](base.unregisterwaitex)<br/>                                                                                                                                                                                        | [**CloseThreadpoolWait**](/windows/win32/WinBase/nf-threadpoolapiset-closethreadpoolwait?branch=master)<br/> [**CreateThreadpoolWait**](/windows/win32/WinBase/nf-threadpoolapiset-createthreadpoolwait?branch=master)<br/> [**SetThreadpoolWait**](/windows/win32/WinBase/nf-threadpoolapiset-setthreadpoolwait?branch=master)<br/> [**WaitForThreadpoolWaitCallbacks**](/windows/win32/WinBase/nf-threadpoolapiset-waitforthreadpoolwaitcallbacks?branch=master)<br/>                                                                                                                                                                                                                                                                                                                   |
| Work                 | [**QueueUserWorkItem**](/windows/win32/WinBase/?branch=master)<br/>                                                                                                                                                                                                                                                                      | [**CloseThreadpoolWork**](/windows/win32/WinBase/nf-threadpoolapiset-closethreadpoolwork?branch=master)<br/> [**CreateThreadpoolWork**](createthreadpoolwork.md)<br/> [**SubmitThreadpoolWork**](/windows/win32/WinBase/nf-threadpoolapiset-submitthreadpoolwork?branch=master)<br/> [**TrySubmitThreadpoolCallback**](/windows/win32/WinBase/nf-threadpoolapiset-trysubmitthreadpoolcallback?branch=master)<br/> [**WaitForThreadpoolWorkCallbacks**](/windows/win32/WinBase/nf-threadpoolapiset-waitforthreadpoolworkcallbacks?branch=master)<br/>                                                                                                                                                                                                                               |
| Timer                | [**CreateTimerQueue**](base.createtimerqueue)<br/> [**CreateTimerQueueTimer**](base.createtimerqueuetimer)<br/> [**ChangeTimerQueueTimer**](base.changetimerqueuetimer)<br/> [**DeleteTimerQueueTimer**](base.deletetimerqueuetimer)<br/> [**DeleteTimerQueueEx**](base.deletetimerqueueex)<br/> | [**CloseThreadpoolTimer**](/windows/win32/WinBase/nf-threadpoolapiset-closethreadpooltimer?branch=master)<br/> [**CreateThreadpoolTimer**](/windows/win32/WinBase/nf-threadpoolapiset-createthreadpooltimer?branch=master)<br/> [**IsThreadpoolTimerSet**](/windows/win32/WinBase/nf-threadpoolapiset-isthreadpooltimerset?branch=master)<br/> [**SetThreadpoolTimer**](/windows/win32/WinBase/nf-threadpoolapiset-setthreadpooltimer?branch=master)<br/> [**WaitForThreadpoolTimerCallbacks**](/windows/win32/WinBase/nf-threadpoolapiset-waitforthreadpooltimercallbacks?branch=master)<br/>                                                                                                                                                                                                                                           |
| I/O                  | [**BindIoCompletionCallback**](/windows/win32/WinBase/nf-winbase-bindiocompletioncallback?branch=master)<br/>                                                                                                                                                                                                                                                        | [**CancelThreadpoolIo**](/windows/win32/WinBase/nf-threadpoolapiset-cancelthreadpoolio?branch=master)<br/> [**CloseThreadpoolIo**](/windows/win32/WinBase/nf-threadpoolapiset-closethreadpoolio?branch=master)<br/> [**CreateThreadpoolIo**](/windows/win32/WinBase/nf-threadpoolapiset-createthreadpoolio?branch=master)<br/> [**StartThreadpoolIo**](/windows/win32/WinBase/nf-threadpoolapiset-startthreadpoolio?branch=master)<br/> [**WaitForThreadpoolIoCallbacks**](/windows/win32/WinBase/nf-threadpoolapiset-waitforthreadpooliocallbacks?branch=master)<br/>                                                                                                                                                                                                                                                                   |
| Clean-up group       |                                                                                                                                                                                                                                                                                                                                | [**CloseThreadpoolCleanupGroup**](/windows/win32/WinBase/nf-threadpoolapiset-closethreadpoolcleanupgroup?branch=master)<br/> [**CloseThreadpoolCleanupGroupMembers**](/windows/win32/WinBase/nf-threadpoolapiset-closethreadpoolcleanupgroupmembers?branch=master)<br/> [**CreateThreadpoolCleanupGroup**](/windows/win32/WinBase/nf-threadpoolapiset-createthreadpoolcleanupgroup?branch=master)<br/>                                                                                                                                                                                                                                                                                                                                     |
| Pool                 |                                                                                                                                                                                                                                                                                                                                | [**CloseThreadpool**](/windows/win32/WinBase/nf-threadpoolapiset-closethreadpool?branch=master)<br/> [**CreateThreadpool**](/windows/win32/WinBase/nf-threadpoolapiset-createthreadpool?branch=master)<br/> [**SetThreadpoolThreadMaximum**](setthreadpoolthreadmaximum.md)<br/> [**SetThreadpoolThreadMinimum**](/windows/win32/WinBase/nf-threadpoolapiset-setthreadpoolthreadminimum?branch=master)<br/>                                                                                                                                                                                                                                                                                                                         |
| Callback environment |                                                                                                                                                                                                                                                                                                                                | [**DestroyThreadpoolEnvironment**](/windows/win32/WinBase/nf-winbase-destroythreadpoolenvironment?branch=master)<br/> [**InitializeThreadpoolEnvironment**](/windows/win32/WinBase/nf-winbase-initializethreadpoolenvironment?branch=master)<br/> [**SetThreadpoolCallbackCleanupGroup**](/windows/win32/WinBase/nf-winbase-setthreadpoolcallbackcleanupgroup?branch=master)<br/> [**SetThreadpoolCallbackLibrary**](/windows/win32/WinBase/nf-winbase-setthreadpoolcallbacklibrary?branch=master)<br/> [**SetThreadpoolCallbackPool**](/windows/win32/WinBase/nf-winbase-setthreadpoolcallbackpool?branch=master)<br/> [**SetThreadpoolCallbackPriority**](/windows/win32/WinBase/nf-winbase-setthreadpoolcallbackpriority?branch=master)<br/> [**SetThreadpoolCallbackRunsLong**](/windows/win32/WinBase/nf-winbase-setthreadpoolcallbackrunslong?branch=master)<br/> |
| Callback             |                                                                                                                                                                                                                                                                                                                                | [**CallbackMayRunLong**](/windows/win32/WinBase/nf-threadpoolapiset-callbackmayrunlong?branch=master)<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| Callback clean up    |                                                                                                                                                                                                                                                                                                                                | [**DisassociateCurrentThreadFromCallback**](/windows/win32/WinBase/nf-threadpoolapiset-disassociatecurrentthreadfromcallback?branch=master)<br/> [**FreeLibraryWhenCallbackReturns**](/windows/win32/WinBase/nf-threadpoolapiset-freelibrarywhencallbackreturns?branch=master)<br/> [**LeaveCriticalSectionWhenCallbackReturns**](/windows/win32/WinBase/nf-threadpoolapiset-leavecriticalsectionwhencallbackreturns?branch=master)<br/> [**ReleaseMutexWhenCallbackReturns**](/windows/win32/WinBase/nf-threadpoolapiset-releasemutexwhencallbackreturns?branch=master)<br/> [**ReleaseSemaphoreWhenCallbackReturns**](/windows/win32/WinBase/nf-threadpoolapiset-releasesemaphorewhencallbackreturns?branch=master)<br/> [**SetEventWhenCallbackReturns**](/windows/win32/WinBase/nf-threadpoolapiset-seteventwhencallbackreturns?branch=master)<br/>                                 |



 

## Related topics

<dl> <dt>

[Thread Pools](thread-pools.md)
</dt> <dt>

[Using the Thread Pool Functions](using-the-thread-pool-functions.md)
</dt> </dl>

 

 




