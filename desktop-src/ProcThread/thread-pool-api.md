---
Description: 'The thread pool application programming interface (API) uses an object-based design.'
ms.assetid: 'c8656469-a273-4838-aa1a-86140b0cd0a2'
title: Thread Pool API
---

# Thread Pool API

The thread pool application programming interface (API) uses an object-based design. Each of the following objects is represented by a user-mode data structure:

-   A pool object is a set of worker threads that can be used to perform work. Each process can create multiple isolated pools with different characteristics as necessary. There is also a default pool for each process.
-   A clean-up group is associated with a set of callback-generating objects. Functions exists to wait on and release all objects that are members of each clean-up group. This frees the application from keeping track of all the objects it has created.
-   A work object is assigned to a pool and optionally to a clean-up group. It can be posted, causing a worker thread from the pool to execute its callback. A work object can have multiple posts outstanding; each generates a callback. The post operation cannot fail due to lack of resources.
-   A timer object controls the scheduling of callbacks. Each time a timer expires, its callback is posted to its worker pool. Setting a timer cannot fail due to lack of resources.
-   A wait object causes a waiter thread to wait on a waitable handle. After the wait is satisfied or the time-out period expires, the waiter thread posts the wait objects' callback to the wait's worker pool. Setting a wait cannot fail due to lack of resources.
-   An I/O object associates a file handle with the I/O completion port for the thread pool. When an asynchronous I/O operation completes, a worker thread picks up the status of the operation and calls the I/O object's callback.

The following table describes the features of the original and current thread pool APIs.



| Feature              | Original API                                                                                                                                                                                                                                                                                                                   | Current API                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
|----------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Synch                | [**RegisterWaitForSingleObject**](base.registerwaitforsingleobject)<br/> [**UnregisterWaitEx**](base.unregisterwaitex)<br/>                                                                                                                                                                                        | [**CloseThreadpoolWait**](closethreadpoolwait.md)<br/> [**CreateThreadpoolWait**](createthreadpoolwait.md)<br/> [**SetThreadpoolWait**](setthreadpoolwait.md)<br/> [**WaitForThreadpoolWaitCallbacks**](waitforthreadpoolwaitcallbacks.md)<br/>                                                                                                                                                                                                                                                                                                                   |
| Work                 | [**QueueUserWorkItem**](queueuserworkitem.md)<br/>                                                                                                                                                                                                                                                                      | [**CloseThreadpoolWork**](closethreadpoolwork.md)<br/> [**CreateThreadpoolWork**](createthreadpoolwork.md)<br/> [**SubmitThreadpoolWork**](submitthreadpoolwork.md)<br/> [**TrySubmitThreadpoolCallback**](trysubmitthreadpoolcallback.md)<br/> [**WaitForThreadpoolWorkCallbacks**](waitforthreadpoolworkcallbacks.md)<br/>                                                                                                                                                                                                                               |
| Timer                | [**CreateTimerQueue**](base.createtimerqueue)<br/> [**CreateTimerQueueTimer**](base.createtimerqueuetimer)<br/> [**ChangeTimerQueueTimer**](base.changetimerqueuetimer)<br/> [**DeleteTimerQueueTimer**](base.deletetimerqueuetimer)<br/> [**DeleteTimerQueueEx**](base.deletetimerqueueex)<br/> | [**CloseThreadpoolTimer**](closethreadpooltimer.md)<br/> [**CreateThreadpoolTimer**](createthreadpooltimer.md)<br/> [**IsThreadpoolTimerSet**](isthreadpooltimerset.md)<br/> [**SetThreadpoolTimer**](setthreadpooltimer.md)<br/> [**WaitForThreadpoolTimerCallbacks**](waitforthreadpooltimercallbacks.md)<br/>                                                                                                                                                                                                                                           |
| I/O                  | [**BindIoCompletionCallback**](bindiocompletioncallback.md)<br/>                                                                                                                                                                                                                                                        | [**CancelThreadpoolIo**](cancelthreadpoolio.md)<br/> [**CloseThreadpoolIo**](closethreadpoolio.md)<br/> [**CreateThreadpoolIo**](createthreadpoolio.md)<br/> [**StartThreadpoolIo**](startthreadpoolio.md)<br/> [**WaitForThreadpoolIoCallbacks**](waitforthreadpooliocallbacks.md)<br/>                                                                                                                                                                                                                                                                   |
| Clean-up group       |                                                                                                                                                                                                                                                                                                                                | [**CloseThreadpoolCleanupGroup**](closethreadpoolcleanupgroup.md)<br/> [**CloseThreadpoolCleanupGroupMembers**](closethreadpoolcleanupgroupmembers.md)<br/> [**CreateThreadpoolCleanupGroup**](createthreadpoolcleanupgroup.md)<br/>                                                                                                                                                                                                                                                                                                                                     |
| Pool                 |                                                                                                                                                                                                                                                                                                                                | [**CloseThreadpool**](closethreadpool.md)<br/> [**CreateThreadpool**](createthreadpool.md)<br/> [**SetThreadpoolThreadMaximum**](setthreadpoolthreadmaximum.md)<br/> [**SetThreadpoolThreadMinimum**](setthreadpoolthreadminimum.md)<br/>                                                                                                                                                                                                                                                                                                                         |
| Callback environment |                                                                                                                                                                                                                                                                                                                                | [**DestroyThreadpoolEnvironment**](destroythreadpoolenvironment.md)<br/> [**InitializeThreadpoolEnvironment**](initializethreadpoolenvironment.md)<br/> [**SetThreadpoolCallbackCleanupGroup**](setthreadpoolcallbackcleanupgroup.md)<br/> [**SetThreadpoolCallbackLibrary**](setthreadpoolcallbacklibrary.md)<br/> [**SetThreadpoolCallbackPool**](setthreadpoolcallbackpool.md)<br/> [**SetThreadpoolCallbackPriority**](setthreadpoolcallbackpriority.md)<br/> [**SetThreadpoolCallbackRunsLong**](setthreadpoolcallbackrunslong.md)<br/> |
| Callback             |                                                                                                                                                                                                                                                                                                                                | [**CallbackMayRunLong**](callbackmayrunlong.md)<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| Callback clean up    |                                                                                                                                                                                                                                                                                                                                | [**DisassociateCurrentThreadFromCallback**](disassociatecurrentthreadfromcallback.md)<br/> [**FreeLibraryWhenCallbackReturns**](freelibrarywhencallbackreturns.md)<br/> [**LeaveCriticalSectionWhenCallbackReturns**](leavecriticalsectionwhencallbackreturns.md)<br/> [**ReleaseMutexWhenCallbackReturns**](releasemutexwhencallbackreturns.md)<br/> [**ReleaseSemaphoreWhenCallbackReturns**](releasesemaphorewhencallbackreturns.md)<br/> [**SetEventWhenCallbackReturns**](seteventwhencallbackreturns.md)<br/>                                 |



 

## Related topics

<dl> <dt>

[Thread Pools](thread-pools.md)
</dt> <dt>

[Using the Thread Pool Functions](using-the-thread-pool-functions.md)
</dt> </dl>

 

 




