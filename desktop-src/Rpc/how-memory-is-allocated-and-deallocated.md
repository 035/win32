---
title: How Memory Is Allocated and Deallocated
description: By default, stub code generated by the MIDL compiler calls user-supplied functions to allocate and free memory. These functions, named midl\_user\_allocate and midl\_user\_free, must be supplied by the developer and linked with the application.
ms.assetid: 65af7a6d-4cfa-4175-9085-560d97cab41d
ms.date: 05/31/2018
ms.topic: article
ms.author: windowssdkdev
ms.prod: windows
ms.technology: desktop
---

# How Memory Is Allocated and Deallocated

By default, stub code generated by the MIDL compiler calls user-supplied functions to allocate and free memory. These functions, named [**midl\_user\_allocate**](https://msdn.microsoft.com/library/windows/desktop/aa367095) and [**midl\_user\_free**](https://msdn.microsoft.com/library/windows/desktop/aa367096), must be supplied by the developer and linked with the application.

All applications must supply implementations of [**midl\_user\_allocate**](https://msdn.microsoft.com/library/windows/desktop/aa367095) and [**midl\_user\_free**](https://msdn.microsoft.com/library/windows/desktop/aa367096), even though the names of these functions may not appear explicitly in the stubs. The only exception is when you are compiling in OSF-compatibility (/osf) mode. These user-supplied functions must match a specific, defined function prototype but otherwise, can be implemented in any way that is convenient or useful for the application. Alternatively, applications can use the RpcSs Memory Management Package. The Microsoft RPC run-time library supplies this group of functions.

The following sections describe the RPC memory management functions.

-   [**midl\_user\_allocate**](https://msdn.microsoft.com/library/windows/desktop/aa367095)
-   [**midl\_user\_free**](https://msdn.microsoft.com/library/windows/desktop/aa367096)
-   [RpcSs Memory Management Package](rpcss-memory-management-package.md)

 

 




